                    <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Dados Educacionais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        .data-card {
            transition: all 0.3s ease;
        }
        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background-color: #4f46e5;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- Header -->
        <header class="bg-indigo-700 text-white shadow-lg">
            <div class="container mx-auto px-4 py-6">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl font-bold">Dados Educacionais Brasil</h1>
                        <p class="text-indigo-200">Visualização interativa de indicadores do IBGE</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <p>Dados .Json</p>
                        <button onclick="exportData()" class="p-2 rounded-full hover:bg-indigo-600">
                            <i data-feather="download"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="container mx-auto px-4 mt-6">
            <div class="flex space-x-2 overflow-x-auto">
                <button class="tab-button px-4 py-2 rounded-t-lg bg-indigo-100 text-indigo-800 font-medium active" data-tab="tab1">
                    Indicadores Principais
                </button>
                <button class="tab-button px-4 py-2 rounded-t-lg bg-indigo-100 text-indigo-800 font-medium" data-tab="tab2">
                    Análise Detalhada
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <!-- Tab 1 Content -->
            <div id="tab1" class="tab-content active">
                <!-- Data Source Info -->
                <section class="mb-12 bg-white rounded-lg shadow-md p-6" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-4 text-indigo-800">
                        <i data-feather="info" class="inline mr-2"></i> Fonte dos Dados
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <h3 class="font-medium text-indigo-700 mb-2">Fontes Primárias</h3>
                            <ul class="list-disc pl-5 space-y-1 text-gray-700">
                                <li>Agência IBGE — PNAD Contínua: Educação 2024 (release e tabelas)</li>
                                <li>Painel de Indicadores IBGE — PNAD Contínua (Analfabetismo, Escolarização)</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h3 class="font-medium text-yellow-700 mb-2">Observações</h3>
                            <p class="text-gray-700">Em 2020–2021 houve restrições no módulo de Educação (coleta por telefone).</p>
                        </div>
                    </div>
                </section>

                <!-- Time Series Charts -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="trending-up" class="inline mr-2"></i> Evolução Temporal dos Indicadores
                    </h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Taxa de Analfabetismo (15+ anos)</h3>
                            <div class="chart-container">
                                <canvas id="analfabetismoChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Taxa de Escolarização (6-14 anos)</h3>
                            <div class="chart-container">
                                <canvas id="escolarizacao6a14Chart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Taxa de Escolarização (15-17 anos)</h3>
                            <div class="chart-container">
                                <canvas id="escolarizacao15a17Chart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Frequência Líquida no Ensino Médio (15-17 anos)</h3>
                            <div class="chart-container">
                                <canvas id="frequenciaMediaChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Regional Data -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="map" class="inline mr-2"></i> Dados Regionais (2024)
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Analfabetismo por Região (%)</h3>
                            <div class="chart-container">
                                <canvas id="analfabetismoRegionalChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Frequência Líquida no Ensino Médio por Região (%)</h3>
                            <div class="chart-container">
                                <canvas id="frequenciaMediaRegionalChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PNE Goals -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="target" class="inline mr-2"></i> Metas do Plano Nacional de Educação
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3">
                                    <i data-feather="check" class="text-green-600"></i>
                                </div>
                                <h3 class="text-lg font-medium text-gray-800">Meta 9: Analfabetismo</h3>
                            </div>
                            <p class="text-gray-600 mb-4">Reduzir a taxa de analfabetismo para 6,5% até 2024</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-2xl font-bold text-green-600">5.3%</span>
                                    <span class="text-gray-500 ml-1">(2024)</span>
                                </div>
                                <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Meta atingida</span>
                            </div>
                        </div>
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mr-3">
                                    <i data-feather="x" class="text-red-600"></i>
                                </div>
                                <h3 class="text-lg font-medium text-gray-800">Meta 3: Ensino Médio</h3>
                            </div>
                            <p class="text-gray-600 mb-4">Taxa líquida de 85% no ensino médio até 2024</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-2xl font-bold text-red-600">76.7%</span>
                                    <span class="text-gray-500 ml-1">(2024)</span>
                                </div>
                                <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">Abaixo da meta</span>
                            </div>
                        </div>
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center mr-3">
                                    <i data-feather="alert-circle" class="text-yellow-600"></i>
                                </div>
                                <h3 class="text-lg font-medium text-gray-800">Meta 12: Ensino Superior</h3>
                            </div>
                            <p class="text-gray-600 mb-4">Taxa líquida de 33% no ensino superior até 2024</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-2xl font-bold text-yellow-600">27.1%</span>
                                    <span class="text-gray-500 ml-1">(2024)</span>
                                </div>
                                <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Parcial</span>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">Meta atingida apenas entre pessoas brancas (37.4%)</p>
                        </div>
                    </div>
                </section>

                <!-- Additional Indicators -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="bar-chart-2" class="inline mr-2"></i> Outros Indicadores Relevantes
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-2 text-gray-800">NEET (15-29 anos)</h3>
                            <p class="text-gray-600 mb-4">Não trabalha, não estuda e não se qualifica</p>
                            <div class="flex items-end">
                                <span class="text-3xl font-bold text-indigo-600">18.5%</span>
                                <span class="text-gray-500 ml-2 mb-1">(2024)</span>
                            </div>
                        </div>
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-2 text-gray-800">Educação Profissional</h3>
                            <p class="text-gray-600 mb-2">Frequenta curso técnico ou normal</p>
                            <div class="flex items-end mb-3">
                                <span class="text-2xl font-bold text-indigo-600">5.8%</span>
                            </div>
                            <p class="text-gray-600 mb-2">Já concluiu curso técnico ou normal</p>
                            <div class="flex items-end">
                                <span class="text-2xl font-bold text-indigo-600">10.1%</span>
                            </div>
                        </div>
                        <div class="data-card bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-2 text-gray-800">Situação Educacional (18-24 anos)</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Frequência adequada</span>
                                    <span class="font-medium">27.1%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Atraso escolar</span>
                                    <span class="font-medium">4.1%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Concluiu a etapa</span>
                                    <span class="font-medium">4.2%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Não frequenta/não concluiu</span>
                                    <span class="font-medium">64.6%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab 2 Content -->
            <div id="tab2" class="tab-content">
                <!-- Data Source Info -->
                <section class="mb-12 bg-white rounded-lg shadow-md p-6" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-4 text-indigo-800">
                        <i data-feather="info" class="inline mr-2"></i> Fonte dos Dados - Análise Detalhada
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <h3 class="font-medium text-indigo-700 mb-2">Fonte Principal</h3>
                            <p class="text-gray-700">PNAD Contínua — Módulo Educação (IBGE)</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h3 class="font-medium text-yellow-700 mb-2">Observações Metodológicas</h3>
                            <ul class="list-disc pl-5 space-y-1 text-gray-700">
                                <li>A PNAD Contínua não coleta 'notas' de prova; 'notas_médias' = média de anos de estudo (25+)</li>
                                <li>Em 2020–2021 houve restrições do módulo Educação; algumas séries ficam ausentes (null)</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Notas Médias (Anos de Estudo) -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="book" class="inline mr-2"></i> Média de Anos de Estudo (Pessoas 25+ anos)
                    </h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Evolução Temporal</h3>
                            <div class="chart-container">
                                <canvas id="notasMediasChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Distribuição por Sexo (2024)</h3>
                            <div class="chart-container">
                                <canvas id="notasMediasSexoChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Distribuição por Cor/Raça (2024)</h3>
                            <div class="chart-container">
                                <canvas id="notasMediasCorChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Dados por Sexo -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="users" class="inline mr-2"></i> Indicadores por Sexo (2024)
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Taxa de Analfabetismo por Sexo (%)</h3>
                            <div class="chart-container">
                                <canvas id="analfabetismoSexoChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Frequência Líquida no Ensino Médio por Sexo (%)</h3>
                            <div class="chart-container">
                                <canvas id="frequenciaMediaSexoChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Dados Regionais Detalhados -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="map-pin" class="inline mr-2"></i> Dados Regionais Detalhados
                    </h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Taxa de Escolarização por Região (15-17 anos)</h3>
                            <div class="chart-container">
                                <canvas id="escolarizacaoRegionalChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-lg font-medium mb-4 text-gray-800">Frequência Líquida no Ensino Médio por Região (15-17 anos)</h3>
                            <div class="chart-container">
                                <canvas id="frequenciaLiquidaRegionalChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Comparativo Regional -->
                <section class="mb-12" data-aos="fade-up">
                    <h2 class="text-2xl font-semibold mb-6 text-indigo-800">
                        <i data-feather="bar-chart-2" class="inline mr-2"></i> Comparativo Regional (2024)
                    </h2>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-4 text-gray-800">Principais Indicadores por Região</h3>
                        <div class="chart-container">
                            <canvas id="comparativoRegionalChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-8">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <h3 class="text-xl font-bold mb-2">Dados Educacionais Brasil</h3>
                        <p class="text-gray-400">Visualização interativa de indicadores do IBGE</p>
                    </div>
                    <div class="flex space-x-4">
                        <a href="https://github.com/willian-cell/PNAD.git" class="text-gray-400 hover:text-white">
                            <i data-feather="github"></i>
                        </a>
                        <a href="https://wa.me/5561986221356" target="_blank" rel="noopener" 
                        class="text-gray-400 hover:text-white" aria-label="WhatsApp">
                        <i data-feather="message-circle"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/willian-batista-oliveira-4ba31143" target="_blank" rel="noopener" 
                        class="text-gray-400 hover:text-white" aria-label="LinkedIn">
                        <i data-feather="linkedin"></i>
                        </a>

                    </div>
                </div>
                <div class="border-t border-gray-700 mt-6 pt-6 text-center text-gray-400 text-sm">
                    <p>© 2024 Visualizador de Dados Educacionais. Todos os direitos reservados.</p>
                    <p class="mt-2">Dados obtidos do IBGE - Pesquisa Nacional por Amostra de Domicílios Contínua (PNAD Contínua)</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Sample JSON data (in a real app, this would come from an API)
        const educationData = {
            "fonte": {
                "ibge_release_educacao_2024_pdf": "Agência IBGE — PNAD Contínua: Educação 2024 (release e tabelas)",
                "ibge_painel_indicadores": "Painel de Indicadores IBGE — PNAD Contínua (Analfabetismo, Escolarização)",
                "observacao": "Em 2020–2021 houve restrições no módulo de Educação (coleta por telefone)."
            },
            "periodo_referencia": ["2015","2016","2017","2018","2019","2020","2021","2022","2023","2024"],
            "indicadores_brasil": {
                "taxa_analfabetismo_15mais_percent": {
                    "2015": null,
                    "2016": 6.7,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": null,
                    "2023": 5.4,
                    "2024": 5.3
                },
                "taxa_escolarizacao_6a14_percent": {
                    "2015": 98.6,
                    "2016": null,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": 99.4,
                    "2023": 99.4,
                    "2024": 99.5
                },
                "taxa_escolarizacao_15a17_percent": {
                    "2015": null,
                    "2016": 86.9,
                    "2017": 86.9,
                    "2018": 87.9,
                    "2019": 89.0,
                    "2020": null,
                    "2021": null,
                    "2022": 92.2,
                    "2023": 91.9,
                    "2024": 93.4
                },
                "taxa_ajustada_frequencia_liquida_ensino_medio_15a17_percent": {
                    "2015": null,
                    "2016": 68.2,
                    "2017": 68.4,
                    "2018": 69.2,
                    "2019": 71.3,
                    "2020": null,
                    "2021": null,
                    "2022": 75.2,
                    "2023": 75.0,
                    "2024": 76.7
                },
                "taxa_ajustada_frequencia_liquida_ensino_fundamental_6a14_percent": {
                    "2015": null,
                    "2016": null,
                    "2017": null,
                    "2018": null,
                    "2019": 71.3,
                    "2020": null,
                    "2021": null,
                    "2022": 75.2,
                    "2023": 75.0,
                    "2024": 76.7
                },
                "educacao_infantil_taxa_escolarizacao_4a5_percent": {
                    "2016": 90.0,
                    "2019": 93.0,
                    "2022": 93.0,
                    "2023": 93.0,
                    "2024": 93.4
                },
                "ensino_superior_18a24_taxa_ajustada_frequencia_liquida_percent": {
                    "2015": null,
                    "2016": null,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": null,
                    "2023": null,
                    "2024": 27.1
                },
                "neet_15a29_percent_nao_trabalha_nem_estuda_nem_se_qualifica": {
                    "2015": null,
                    "2016": null,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": null,
                    "2023": null,
                    "2024": 18.5
                }
            },
            "recortes_2024": {
                "analfabetismo_15mais_por_regiao_percent": {
                    "norte": 6.0,
                    "nordeste": 11.1,
                    "sudeste": 2.8,
                    "sul": 2.7,
                    "centro_oeste": 3.3,
                    "brasil": 5.3
                },
                "ensino_medio_15a17_taxa_ajustada_frequencia_liquida_por_regiao_percent": {
                    "norte": 69.8,
                    "nordeste": 73.9,
                    "sudeste": 80.8,
                    "sul": 76.7,
                    "centro_oeste": 77.4,
                    "brasil": 76.7
                },
                "ensino_superior_18a24_taxa_ajustada_frequencia_liquida_por_cor_ou_raca_percent": {
                    "branca": 37.4,
                    "preta_ou_parda": 20.6,
                    "total": 27.1
                },
                "situacao_educacional_18a24_percent": {
                    "frequencia_escolar_adequada": 27.1,
                    "atraso_escolar": 4.1,
                    "nao_frequenta_e_ja_concluiu_a_etapa": 4.2,
                    "nao_frequenta_e_nao_concluiu_a_etapa": 64.6
                },
                "educacao_profissional": {
                    "com_EM_concluido_ou_ingressado_sem_concluir_e_fora_da_graduacao": {
                        "frequenta_curso_tecnico_ou_normal_percent": 5.8,
                        "ja_concluiu_curso_tecnico_ou_normal_percent": 10.1
                    },
                    "qualificacao_profissional_14mais_percent": 0.8
                }
            },
            "metas_pne_status_2024": {
                "meta_3_ensino_medio_15a17_taxa_liquida_85_percent": {
                    "alvo_ate_2024": 85.0,
                    "observado_2024": 76.7,
                    "status": "abaixo_da_meta"
                },
                "meta_12_ensino_superior_18a24_taxa_liquida_33_percent": {
                    "alvo_ate_2024": 33.0,
                    "observado_2024_total": 27.1,
                    "observado_2024_brancos": 37.4,
                    "status_total": "abaixo_da_meta",
                    "observacao": "alvo atingido apenas entre pessoas brancas"
                },
                "meta_9_analfabetismo_15mais_ate_6_5_percent": {
                    "alvo": 6.5,
                    "observado_2024": 5.3,
                    "status": " atingida"
                }
            },
            "notas_metodologicas": [
                "Série 2015–2024: onde não há dado, retornou-se null (ex.: 2020–2021).",
                "Taxa ajustada de frequência escolar líquida: inclui quem está na etapa prevista pela idade e quem já concluiu a etapa e cursa a seguinte.",
                "Indicadores por cor/raça usam categorias IBGE (branca; preta ou parda)."
            ]
        };

        // Detailed analysis data
        const detailedAnalysisData = {
            "metadados": {
                "fonte_principal": "PNAD Contínua — Módulo Educação (IBGE)",
                "periodo_analise": ["2015","2016","2017","2018","2019","2020","2021","2022","2023","2024"],
                "observacoes": [
                    "A PNAD Contínua não coleta 'notas' de prova; aqui, 'notas_médias' = média de anos de estudo (25+).",
                    "Em 2020–2021 houve restrições do módulo Educação; algumas séries ficam ausentes (null)."
                ]
            },
            "series_brasil": {
                "taxa_analfabetismo_15mais_percent": {
                    "2015": null,
                    "2016": 6.7,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": null,
                    "2023": 5.4,
                    "2024": 5.3
                },
                "taxa_escolarizacao_6a14_percent": {
                    "2015": 98.6,
                    "2016": null,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": 99.4,
                    "2023": 99.4,
                    "2024": 99.5
                },
                "taxa_escolarizacao_15a17_percent": {
                    "2015": null,
                    "2016": 86.9,
                    "2017": 86.9,
                    "2018": 87.9,
                    "2019": 89.0,
                    "2020": null,
                    "2021": null,
                    "2022": 92.2,
                    "2023": 91.9,
                    "2024": 93.4
                },
                "taxa_ajustada_frequencia_liquida_em_15a17_percent": {
                    "2015": null,
                    "2016": 68.2,
                    "2017": 68.4,
                    "2018": 69.2,
                    "2019": 71.3,
                    "2020": null,
                    "2021": null,
                    "2022": 75.2,
                    "2023": 75.0,
                    "2024": 76.7
                }
            },
            "quebras_por_sexo_2024": {
                "taxa_analfabetismo_15mais_percent": {
                    "homens": 5.6,
                    "mulheres": 5.0,
                    "total": 5.3
                },
                "taxa_ajustada_frequencia_liquida_em_15a17_percent": {
                    "homens": null,
                    "mulheres": 80.1,
                    "total": 76.7
                }
            },
            "quebras_por_regiao": {
                "taxa_analfabetismo_15mais_percent_2024": {
                    "norte": 6.0,
                    "nordeste": 11.1,
                    "sudeste": 2.8,
                    "sul": 2.7,
                    "centro_oeste": 3.3,
                    "brasil": 5.3
                },
                "taxa_escolarizacao_15a17_percent_2016_2024": {
                    "brasil":   {"2016":86.9,"2017":86.9,"2018":87.9,"2019":89.0,"2020":null,"2021":null,"2022":92.2,"2023":91.9,"2024":93.4},
                    "norte":    {"2016":87.2,"2017":86.3,"2018":87.9,"2019":88.5,"2020":null,"2021":null,"2022":91.8,"2023":89.1,"2024":92.0},
                    "nordeste": {"2016":85.6,"2017":85.7,"2018":86.6,"2019":87.8,"2020":null,"2021":null,"2022":90.9,"2023":91.4,"2024":93.1},
                    "sudeste":  {"2016":88.0,"2017":88.5,"2018":88.6,"2019":88.9,"2020":null,"2021":null,"2022":93.9,"2023":93.4,"2024":94.3},
                    "sul":      {"2016":85.8,"2017":85.5,"2018":87.9,"2019":91.4,"2020":null,"2021":null,"2022":90.4,"2023":92.2,"2024":93.1},
                    "centro_oeste":{"2016":88.2,"2017":86.6,"2018":89.1,"2019":90.4,"2020":null,"2021":null,"2022":92.4,"2023":90.4,"2024":92.8}
                },
                "taxa_ajustada_frequencia_liquida_em_15a17_percent_2016_2024": {
                    "brasil":   {"2016":68.2,"2017":68.4,"2018":69.2,"2019":71.3,"2020":null,"2021":null,"2022":75.2,"2023":75.0,"2024":76.7},
                    "norte":    {"2016":58.5,"2017":59.8,"2018":61.9,"2019":62.2,"2020":null,"2021":null,"2022":68.1,"2023":65.9,"2024":69.8},
                    "nordeste": {"2016":59.0,"2017":60.5,"2018":61.2,"2019":63.3,"2020":null,"2021":null,"2022":69.3,"2023":71.3,"2024":73.9},
                    "sudeste":  {"2016":76.9,"2017":76.3,"2018":76.1,"2019":79.3,"2020":null,"2021":null,"2022":81.5,"2023":81.0,"2024":80.8},
                    "sul":      {"2016":69.5,"2017":69.6,"2018":71.4,"2019":72.6,"2020":null,"2021":null,"2022":75.4,"2023":74.0,"2024":76.7},
                    "centro_oeste":{"2016":70.0,"2017":70.3,"2018":71.5,"2019":74.2,"2020":null,"2021":null,"2022":77.6,"2023":75.0,"2024":77.4}
                }
            },
            "notas_medias": {
                "definicao": "média de anos de estudo das pessoas de 25 anos ou mais (PNAD Contínua)",
                "serie_brasil": {
                    "2016": 9.1,
                    "2017": null,
                    "2018": null,
                    "2019": null,
                    "2020": null,
                    "2021": null,
                    "2022": 9.9,
                    "2023": 9.9,
                    "2024": 10.1
                },
                "por_sexo_2024": {
                    "homens": 9.9,
                    "mulheres": 10.3,
                    "total": 10.1
                },
                "por_cor_ou_raca_2024": {
                    "branca": 11.0,
                    "preta_ou_parda": 9.4,
                    "total": 10.1
                },
                "por_regiao_2024": {
                    "norte": null,
                    "nordeste": null,
                    "sudeste": null,
                    "sul": null,
                    "centro_oeste": null,
                    "observacao": "consultar SIDRA para valores regionais detalhados"
                }
            }
        };

        /* ===============================
           UI helpers
        =============================== */

        // Ativa ícones e AOS
        document.addEventListener('DOMContentLoaded', () => {
            if (window.feather) feather.replace();
            if (window.AOS) AOS.init({ once: true, duration: 700, easing: 'ease-out-quart' });
            setupTabs();
            renderAllCharts();
        });

        // Dark mode simples
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            document.body.classList.toggle('bg-gray-900');
            document.body.classList.toggle('text-gray-100');
        }

        // Exporta os dois blocos de dados em um único JSON
        function exportData() {
            const payload = {
                educationData,
                detailedAnalysisData
            };
            const blob = new Blob([JSON.stringify(payload, null, 2)], { type: 'application/json' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'pnad_educacao_brasil.json';
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(a.href);
        }

        // Tabs
        function setupTabs() {
            const buttons = Array.from(document.querySelectorAll('.tab-button'));
            const tabs = Array.from(document.querySelectorAll('.tab-content'));
            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-tab');
                    buttons.forEach(b => b.classList.remove('active'));
                    tabs.forEach(t => t.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(id).classList.add('active');
                });
            });
        }

        /* ===============================
           Chart helpers
        =============================== */

        // Extrai anos e valores em ordem
        function seriesFromObject(obj, years) {
            return years.map(y => obj[y] ?? null);
        }

        // Cores base
        const palette = {
            indigo: 'rgba(79,70,229,0.8)',
            indigoSoft: 'rgba(79,70,229,0.2)',
            emerald: 'rgba(16,185,129,0.8)',
            emeraldSoft: 'rgba(16,185,129,0.2)',
            rose: 'rgba(244,63,94,0.8)',
            roseSoft: 'rgba(244,63,94,0.2)',
            amber: 'rgba(245,158,11,0.8)',
            amberSoft: 'rgba(245,158,11,0.2)',
            slate: 'rgba(100,116,139,0.8)',
            slateSoft: 'rgba(100,116,139,0.2)'
        };

        function lineChart(ctx, labels, label, data, color, bg) {
            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels,
                    datasets: [{
                        label,
                        data,
                        borderColor: color,
                        backgroundColor: bg,
                        fill: true,
                        borderWidth: 2,
                        tension: 0.25,
                        pointRadius: 3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: true },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    interaction: { mode: 'nearest', intersect: false },
                    scales: {
                        y: { beginAtZero: false, grid: { color: 'rgba(0,0,0,0.05)' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        function barChart(ctx, labels, datasets) {
            return new Chart(ctx, {
                type: 'bar',
                data: { labels, datasets },
                options: {
                    responsive: true,
                    plugins: { legend: { position: 'top' } },
                    scales: {
                        y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.05)' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        /* ===============================
           Render charts
        =============================== */
        function renderAllCharts() {
            const years = educationData.periodo_referencia;

            // --- Série Brasil (tab 1) ---
            const analfabSeries = educationData.indicadores_brasil.taxa_analfabetismo_15mais_percent;
            lineChart(
                document.getElementById('analfabetismoChart'),
                years,
                'Analfabetismo 15+ (%)',
                seriesFromObject(analfabSeries, years),
                palette.rose,
                palette.roseSoft
            );

            const esc614 = educationData.indicadores_brasil.taxa_escolarizacao_6a14_percent;
            lineChart(
                document.getElementById('escolarizacao6a14Chart'),
                years,
                'Escolarização 6–14 (%)',
                seriesFromObject(esc614, years),
                palette.indigo,
                palette.indigoSoft
            );

            const esc1517 = educationData.indicadores_brasil.taxa_escolarizacao_15a17_percent;
            lineChart(
                document.getElementById('escolarizacao15a17Chart'),
                years,
                'Escolarização 15–17 (%)',
                seriesFromObject(esc1517, years),
                palette.emerald,
                palette.emeraldSoft
            );

            const emLiquida = educationData.indicadores_brasil.taxa_ajustada_frequencia_liquida_ensino_medio_15a17_percent;
            lineChart(
                document.getElementById('frequenciaMediaChart'),
                years,
                'Freq. líquida EM 15–17 (%)',
                seriesFromObject(emLiquida, years),
                palette.amber,
                palette.amberSoft
            );

            // Regionais 2024
            const regLabels = ['Norte','Nordeste','Sudeste','Sul','Centro-Oeste'];
            const analfReg = educationData.recortes_2024.analfabetismo_15mais_por_regiao_percent;
            barChart(
                document.getElementById('analfabetismoRegionalChart'),
                regLabels,
                [{
                    label: 'Analfabetismo 15+ (%) — 2024',
                    data: [analfReg.norte, analfReg.nordeste, analfReg.sudeste, analfReg.sul, analfReg.centro_oeste],
                    backgroundColor: palette.rose
                }]
            );

            const emReg = educationData.recortes_2024.ensino_medio_15a17_taxa_ajustada_frequencia_liquida_por_regiao_percent;
            barChart(
                document.getElementById('frequenciaMediaRegionalChart'),
                regLabels,
                [{
                    label: 'Freq. líquida EM 15–17 (%) — 2024',
                    data: [emReg.norte, emReg.nordeste, emReg.sudeste, emReg.sul, emReg.centro_oeste],
                    backgroundColor: palette.indigo
                }]
            );

            // --- Tab 2: Notas (anos de estudo) ---
            const notas = detailedAnalysisData.notas_medias;
            lineChart(
                document.getElementById('notasMediasChart'),
                ['2016','2017','2018','2019','2020','2021','2022','2023','2024'],
                'Média de anos de estudo (25+)',
                seriesFromObject(notas.serie_brasil, ['2016','2017','2018','2019','2020','2021','2022','2023','2024']),
                palette.slate,
                palette.slateSoft
            );

            // Barras por sexo (2024)
            const nmSexo = notas.por_sexo_2024;
            barChart(
                document.getElementById('notasMediasSexoChart'),
                ['Homens','Mulheres','Total'],
                [{
                    label: 'Média de anos de estudo (25+) — 2024',
                    data: [nmSexo.homens, nmSexo.mulheres, nmSexo.total],
                    backgroundColor: [palette.indigo, palette.emerald, palette.slate]
                }]
            );

            // Barras por cor/raça (2024)
            const nmCor = notas.por_cor_ou_raca_2024;
            barChart(
                document.getElementById('notasMediasCorChart'),
                ['Branca','Preta ou Parda','Total'],
                [{
                    label: 'Média de anos de estudo (25+) — 2024',
                    data: [nmCor.branca, nmCor.preta_ou_parda, nmCor.total],
                    backgroundColor: [palette.indigo, palette.emerald, palette.slate]
                }]
            );

            // Indicadores por sexo (2024)
            const sexo = detailedAnalysisData.quebras_por_sexo_2024;
            barChart(
                document.getElementById('analfabetismoSexoChart'),
                ['Homens','Mulheres','Total'],
                [{
                    label: 'Analfabetismo 15+ (%) — 2024',
                    data: [sexo.taxa_analfabetismo_15mais_percent.homens, sexo.taxa_analfabetismo_15mais_percent.mulheres, sexo.taxa_analfabetismo_15mais_percent.total],
                    backgroundColor: [palette.rose, palette.emerald, palette.slate]
                }]
            );

            barChart(
                document.getElementById('frequenciaMediaSexoChart'),
                ['Homens','Mulheres','Total'],
                [{
                    label: 'Freq. líquida EM 15–17 (%) — 2024',
                    data: [sexo.taxa_ajustada_frequencia_liquida_em_15a17_percent.homens, sexo.taxa_ajustada_frequencia_liquida_em_15a17_percent.mulheres, sexo.taxa_ajustada_frequencia_liquida_em_15a17_percent.total],
                    backgroundColor: [palette.indigo, palette.emerald, palette.slate]
                }]
            );

            // Regionais detalhados (séries 2016–2024)
            const regEsc = detailedAnalysisData.quebras_por_regiao.taxa_escolarizacao_15a17_percent_2016_2024;
            const regEmLiq = detailedAnalysisData.quebras_por_regiao.taxa_ajustada_frequencia_liquida_em_15a17_percent_2016_2024;
            const regYears = ['2016','2017','2018','2019','2020','2021','2022','2023','2024'];

            new Chart(document.getElementById('escolarizacaoRegionalChart'), {
                type: 'line',
                data: {
                    labels: regYears,
                    datasets: [
                        { label: 'Brasil', data: seriesFromObject(regEsc.brasil, regYears), borderColor: palette.slate, backgroundColor: palette.slateSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Norte', data: seriesFromObject(regEsc.norte, regYears), borderColor: palette.indigo, backgroundColor: palette.indigoSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Nordeste', data: seriesFromObject(regEsc.nordeste, regYears), borderColor: palette.emerald, backgroundColor: palette.emeraldSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Sudeste', data: seriesFromObject(regEsc.sudeste, regYears), borderColor: palette.rose, backgroundColor: palette.roseSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Sul', data: seriesFromObject(regEsc.sul, regYears), borderColor: palette.amber, backgroundColor: palette.amberSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Centro-Oeste', data: seriesFromObject(regEsc.centro_oeste, regYears), borderColor: 'rgba(14,165,233,0.9)', backgroundColor: 'rgba(14,165,233,0.2)', fill: false, borderWidth: 2, tension: .25 }
                    ]
                },
                options: { responsive: true, plugins: { legend: { position: 'top' } } }
            });

            new Chart(document.getElementById('frequenciaLiquidaRegionalChart'), {
                type: 'line',
                data: {
                    labels: regYears,
                    datasets: [
                        { label: 'Brasil', data: seriesFromObject(regEmLiq.brasil, regYears), borderColor: palette.slate, backgroundColor: palette.slateSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Norte', data: seriesFromObject(regEmLiq.norte, regYears), borderColor: palette.indigo, backgroundColor: palette.indigoSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Nordeste', data: seriesFromObject(regEmLiq.nordeste, regYears), borderColor: palette.emerald, backgroundColor: palette.emeraldSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Sudeste', data: seriesFromObject(regEmLiq.sudeste, regYears), borderColor: palette.rose, backgroundColor: palette.roseSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Sul', data: seriesFromObject(regEmLiq.sul, regYears), borderColor: palette.amber, backgroundColor: palette.amberSoft, fill: false, borderWidth: 2, tension: .25 },
                        { label: 'Centro-Oeste', data: seriesFromObject(regEmLiq.centro_oeste, regYears), borderColor: 'rgba(14,165,233,0.9)', backgroundColor: 'rgba(14,165,233,0.2)', fill: false, borderWidth: 2, tension: .25 }
                    ]
                },
                options: { responsive: true, plugins: { legend: { position: 'top' } } }
            });

            // Comparativo regional 2024 (analfabetismo x freq. EM)
            barChart(
                document.getElementById('comparativoRegionalChart'),
                regLabels,
                [
                    {
                        label: 'Analfabetismo 15+ (%) — 2024',
                        data: [analfReg.norte, analfReg.nordeste, analfReg.sudeste, analfReg.sul, analfReg.centro_oeste],
                        backgroundColor: palette.rose
                    },
                    {
                        label: 'Freq. líquida EM 15–17 (%) — 2024',
                        data: [emReg.norte, emReg.nordeste, emReg.sudeste, emReg.sul, emReg.centro_oeste],
                        backgroundColor: palette.indigo
                    }
                ]
            );
        }
    </script>

    <style>
        /* Dark mode básico para caixas claras */
        .dark .bg-white { background-color: #1f2937 !important; color: #e5e7eb !important; }
        .dark header { background-color: #111827 !important; }
        .dark .text-gray-800 { color: #e5e7eb !important; }
        .dark .text-gray-700 { color: #d1d5db !important; }
        .dark .text-gray-600 { color: #cbd5e1 !important; }
        .dark .bg-indigo-100 { background-color: rgba(79,70,229,0.15) !important; color: #e0e7ff !important; }
        .dark .bg-yellow-50 { background-color: rgba(245,158,11,0.1) !important; }
        .dark .bg-gray-800 { background-color: #0f172a !important; }
        .dark .border-gray-700 { border-color: #1f2937 !important; }
    </style>
</body>
</html>
